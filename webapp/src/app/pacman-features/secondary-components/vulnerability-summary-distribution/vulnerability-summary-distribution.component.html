<!--
 *Copyright 2018 T Mobile, Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); You may not use
 * this file except in compliance with the License. A copy of the License is located at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * or in the "license" file accompanying this file. This file is distributed on
 * an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or
 * implied. See the License for the specific language governing permissions and
 * limitations under the License.
 -->

 <div class="open-vulnerability-table-wrapper flex flex-col">
	<div class="sub-head relative">
        <app-title-burger-head [subHeadTitle]="'Open Vulnerabilities by VP/Director/Application'"></app-title-burger-head>
        <img [class.hide]='errorValue<1' (click)='downloadCsv()' class='ag-download' src='../assets/icons/Download-active.svg'>
  </div>
  <div [class.hide]='errorValue<1' class="data-table-tabs flex flex-between flex-align-center" *ngIf="tabsData">
    <div class="tabs-header flex flex-align-center">
        <div class="individual-tag-header filter-by">Distribute by:</div>
        <div *ngFor="let tab of tabsData; let i = index ">
            
        </div>
        <div class="individual-tag-header" *ngFor="let tab of tabsData; let i = index " [class.selected]="tabSelected(tab.name)" (click)="selectTab(tab.name, i)">
            <span>{{tab.name}} <span class="subscript-count">({{tab.length}})</span></span>
        </div>
    </div>    
  </div>
  <div class="full-width relative overflow-hidden flex-grow" (window:resize)='onresize()'>
    	<ag-grid-angular *ngIf="showtable" [class.hide]='errorValue<1' #agGrid class="ag-theme-material full-width table-wrap"
                      [gridOptions]="gridOptions" 
                      [getContextMenuItems]="getContextMenuItems"
                      [enableRangeSelection]="true" 
                      [enableFilter]='true'
                      [allowContextMenuWithControlKey]="true"
                      [rowGroupPanelShow]="'never'"
                      [groupIncludeFooter]="true"
                      (gridReady)="onGridReady($event)"
                      rowHeight='36'
                      enableColResize='true'
                      enableSorting='true'
                      animateRows='true'
                      suppressFieldDotNotation='true'
                      toolPanelSuppressRowGroups='true'
                      toolPanelSuppressValues='true'
                      toolPanelSuppressPivots='true'
                      toolPanelSuppressPivotMode='true'
                      rowSelection='multiple'
                      rowDeselection='true'
                      enableMultiRangeSelection='true'
                      enableCsvExport='true'
                      suppressNoRowsOverlay='true' 
                      suppressRowClickSelection='true'
                      pagination='true'
                      paginationAutoPageSize='true'
                      >
      </ag-grid-angular>
      <div class='loader' *ngIf='errorValue==0'></div>      
      <div class="error-msg-block center" *ngIf='errorValue == -1'>
          <app-error-message *ngIf='errorValue == -1' [selectedValue]="errorMessage"></app-error-message>
      </div>
  </div>
</div>
